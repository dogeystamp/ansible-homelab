---
hypervisors:
  hosts:
    urbs:
      enclave_enabled: true
      enclave_luks_partuuid: cb86dac3-9d31-c941-9f3b-45ec5a00d763
      enclave_vms:
        - "meridies"
      ansible_host: 192.168.0.5
      nftables_preset: "bastion"
      nftables_external_listens_tcp:
        - 80
        - 443
      nftables_internal_listens_tcp:
        - 10001 # forgejo ssh


# Virtual machines
domains:
  hosts:
    caupo:
      ansible_host: 10.55.55.2
      libvirt_mac_address: "52:54:00:00:00:02"
      libvirt_memory_mib: 1024
      libvirt_clean_image: "/disk/stat/vm/debian-13-nocloud-arm64.qcow2"
      libvirt_enable_vmdisk: true
      nftables_preset: "service"

    janua:
      ansible_host: 10.55.55.3
      libvirt_mac_address: "52:54:00:00:00:03"
      libvirt_memory_mib: 512
      libvirt_clean_image: "/disk/stat/vm/debian-13-nocloud-arm64.qcow2"
      nftables_preset: "service"
      nftables_internal_listens_udp:
        - 53
      nftables_internal_listens_tcp:
        - 8080  # http  (internally exposed)
        - 8443  # https (internally exposed)

    oriens:
      ansible_host: 10.55.55.4
      libvirt_mac_address: "52:54:00:00:00:04"
      libvirt_memory_mib: 1280
      libvirt_clean_image: "/disk/stat/vm/debian-13-nocloud-arm64.qcow2"
      libvirt_enable_vmdisk: true
      nftables_preset: "service"
      nftables_internal_listens_tcp:
        - 4533 # navidrome
        - 3000 # forgejo http
        - 10001 # forgejo ssh
        - 8001 # xandikos
        - 8002 # matrix http

    meridies:
      ansible_host: 10.55.55.6
      libvirt_vm_directory: "/edisk/vm"
      libvirt_autostart: false
      libvirt_mac_address: "52:54:00:00:00:06"
      libvirt_memory_mib: 1024
      libvirt_enable_vmdisk: true
      libvirt_clean_image: "/disk/stat/vm/debian-13-nocloud-arm64.qcow2"
      nftables_preset: "service"
      nftables_internal_listens_tcp:
        - 8003 # paperless http

    harena-ii:
      ansible_host: 10.55.55.5
      libvirt_mac_address: "52:54:00:00:00:05"
      libvirt_memory_mib: 368
      libvirt_enable_vmdisk: true
      libvirt_enable_ext: true
      libvirt_clean_image: "/disk/stat/vm/debian-13-nocloud-arm64.qcow2"
      nftables_preset: "service"
      nftables_internal_listens_tcp:
        - 8003 # paperless http


# Categories of services

ingress:
  hosts:
    janua:

xandikos:
  hosts:
    oriens:

navidrome:
  hosts:
    oriens:

forgejo:
  hosts:
    oriens:

matrix:
  hosts:
    oriens:

paperless:
  hosts:
    harena-ii:

haproxy:
  hosts:
    urbs:

borg_client:
  hosts:
    oriens:
      borg_paths:
        - /vmdisk/xandikos
        - /vmdisk/navidrome_data
        - /vmdisk/forgejo
      borg_excludes:
        - "-/vmdisk/navidrome_data/cache"
    harena-ii:
      borg_paths:
        - /vmdisk/bwaa

borg_server:
  hosts:
    caupo:
